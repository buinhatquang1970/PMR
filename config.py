# config.py
# CẤU HÌNH HỆ THỐNG TÍNH TOÁN TẦN SỐ PMR
# Cập nhật: Tuân thủ Tài liệu mô tả Final & Phụ lục I

# =============================================================================
# A. QUY HOẠCH TẦN SỐ (Bảng 1 & Bảng 2)
# =============================================================================
FREQUENCY_ALLOCATION_VHF = [
    (138.000, 141.500, ['LAN'], "LAN"),
    (146.000, 146.500, ['LAN'], "LAN"),
    (147.000, 149.000, ['WAN_DUPLEX'], "WAN Duplex"),
    (149.000, 149.400, ['LAN', 'WAN_SIMPLEX'], "LAN, WAN Simplex"),
    (149.400, 149.900, ['LAN', 'WAN_SIMPLEX'], "LAN, WAN Simplex"),
    (156.5625, 156.7625, ['LAN'], "LAN"),
    (156.8375, 157.4375, ['LAN', 'WAN_SIMPLEX'], "LAN, WAN Simplex"),
    (160.4375, 160.600, ['LAN'], "LAN"),
    (160.600, 160.975, ['LAN'], "LAN"),
    (160.975, 161.475, ['LAN'], "LAN"),
    (161.475, 161.525, ['LAN'], "LAN"),
    (161.525, 161.9625, ['LAN', 'WAN_SIMPLEX'], "LAN, WAN Simplex"),
    (161.9875, 162.0125, ['LAN'], "LAN"),
    (162.050, 165.000, ['WAN_DUPLEX'], "WAN Duplex"),
    (165.000, 166.000, ['LAN', 'WAN_DUPLEX'], "LAN, WAN Duplex"),
    (167.000, 170.000, ['WAN_DUPLEX'], "WAN Duplex"),
    (170.000, 171.000, ['LAN', 'WAN_SIMPLEX', 'WAN_DUPLEX'], "Hỗn hợp"),
    (171.000, 174.000, ['LAN'], "LAN"),
]

# UHF: ĐÃ KHÓA 'WAN_SIMPLEX' THEO QUY HOẠCH MỚI
FREQUENCY_ALLOCATION_UHF = [
    (406.200, 409.000, ['LAN'], "LAN"),
    (415.000, 415.500, ['LAN'], "LAN"),
    (418.500, 419.500, ['LAN', 'WAN_DUPLEX'], "LAN, WAN Duplex"), 
    (428.500, 429.500, ['LAN', 'WAN_DUPLEX'], "LAN, WAN Duplex"), 
    (429.500, 430.000, ['LAN'], "LAN"),
    (440.000, 440.500, ['LAN'], "LAN"),
    (440.500, 441.000, ['LAN', 'WAN_DUPLEX'], "LAN, WAN Duplex"), 
    (441.200, 444.000, ['WAN_DUPLEX'], "WAN Duplex"),             
    (445.500, 446.000, ['LAN', 'WAN_DUPLEX'], "LAN, WAN Duplex"), 
    (449.000, 450.000, ['LAN'], "LAN"),
    (457.370, 457.475, ['LAN'], "LAN"),
    (461.475, 463.080, ['LAN'], "LAN"),
    (467.370, 470.000, ['LAN'], "LAN"),
]

# =============================================================================
# B. DANH SÁCH CẤM VÀ DÙNG CHUNG (PHỤ LỤC I)
# =============================================================================

# 1. DANH SÁCH DẢI TẦN CẤM (Mục 284 - Phụ lục I)
FORBIDDEN_BANDS = [
    (157.4375, 160.4375),
    (149.9, 150.05),
    (150.0500, 154.0000),
    (450.5000, 453.0799),
    (406.1000, 406.2000),
    (453.0800, 457.3700),
    (408.8750, 408.9750) # Dải tần EVN
]

# 2. DANH SÁCH CÁC KÊNH TẦN SỐ DÙNG CHUNG (Mục 282 - Phụ lục I)
# Bao gồm cả tần số chính và dự phòng (Mới/Cũ)
SHARED_FREQUENCIES = [
    # VHF
    138.750, 140.425, 
    140.750, 142.750,
    147.800, 148.475, 147.575, 148.650,
    163.225, 168.225,
    169.250, 169.900,
    # UHF
    406.325, 408.825,
    408.300, 408.475,
    441.475, 441.625, 
    449.125, 449.400
]

# =============================================================================
# NEW: DẢI TẦN ƯU TIÊN (Maritime mobile priority bands)
# - Các dải này KHÔNG phải bị cấm nhưng "ưu tiên" cho nghiệp vụ di động hàng hải.
# - Khi xuất danh sách tần số khả dụng, nếu tần số nằm trong một dải này,
#   UI sẽ cảnh báo (màu vàng) để người cấp phép cân nhắc điều kiện "không gây nhiễu".
# =============================================================================
PRIORITY_BANDS = [
    (156.0, 156.4875),
    (156.5625, 156.7625),
    (156.8375, 157.45),
    (160.6, 160.975),
    (161.475, 161.9625),
    (161.9875, 162.0125),
    (162.0375, 162.05),
]

# Màu cảnh báo (hex) dùng trong UI
PRIORITY_HIGHLIGHT_COLOR = "#b48b00"  # vàng đậm để dễ nhìn trên nền trắng

# =============================================================================
# C. CHỈ TIÊU KHOẢNG CÁCH (MATRIX)
# =============================================================================
# Cấu trúc: { Loại Mạng: { Băng thông Mới: { Delta F: { Băng thông Cũ: Khoảng cách } } } }

# 1. DẢI TẦN VHF
MATRIX_VHF = {
    # 1.1 LAN TP Lớn - Anten Cao (>15m)
    "LAN_BIG_CITY_HIGH": {
        6.25: { 0: {6.25: 10, 12.5: 10, 25: 10}, 6.25: {6.25: 2.1, 12.5: 6, 25: 8.5}, 12.5: {6.25: 0.2, 12.5: 0.6, 25: 3.2}, 18.75: {6.25: 0.1, 12.5: 0.3, 25: 0.7} },
        12.5: { 0: {6.25: 10, 12.5: 10, 25: 10}, 6.25: {6.25: 6, 12.5: 7, 25: 8.7}, 12.5: {6.25: 0.6, 12.5: 1.2, 25: 4.5}, 18.75: {6.25: 0.3, 12.5: 0.4, 25: 1.1}, 25: {6.25: 0, 12.5: 0.1, 25: 0.2} },
        25.0: { 0: {6.25: 10, 12.5: 10, 25: 10}, 6.25: {6.25: 8.5, 12.5: 8.7, 25: 9}, 12.5: {6.25: 3.2, 12.5: 4.5, 25: 4.9}, 18.75: {6.25: 0.7, 12.5: 1.1, 25: 1.7}, 25: {6.25: 0, 12.5: 0.2, 25: 0.4} }[...]
    },
    # 1.2 LAN TP Lớn - Anten Thấp (<=15m)
    "LAN_BIG_CITY_LOW": {
        6.25: { 0: {6.25: 6.3, 12.5: 6.3, 25: 6.3}, 6.25: {6.25: 1.4, 12.5: 4, 25: 5}, 12.5: {6.25: 0.1, 12.5: 0.3, 25: 1.5}, 18.75: {6.25: 0, 12.5: 0.1, 25: 0.2} },
        12.5: { 0: {6.25: 6.3, 12.5: 6.3, 25: 6.3}, 6.25: {6.25: 4, 12.5: 5, 25: 5.5}, 12.5: {6.25: 0.3, 12.5: 0.9, 25: 2}, 18.75: {6.25: 0.1, 12.5: 0.2, 25: 0.7}, 25: {6.25: 0, 12.5: 0, 25: 0.2} },
        25.0: { 0: {6.25: 6.3, 12.5: 6.3, 25: 6.3}, 6.25: {6.25: 5, 12.5: 5.5, 25: 6}, 12.5: {6.25: 1.5, 12.5: 2, 25: 3.5}, 18.75: {6.25: 0.2, 12.5: 0.7, 25: 1.2}, 25: {6.25: 0, 12.5: 0.2, 25: 0.3} }
    },
    # 1.3 LAN Tỉnh khác
    "LAN_PROVINCE": {
        6.25: { 0: {6.25: 10, 12.5: 10, 25: 10}, 6.25: {6.25: 2.1, 12.5: 6, 25: 8.7}, 12.5: {6.25: 0.2, 12.5: 0.6, 25: 3.2}, 18.75: {6.25: 0.3, 12.5: 0.2, 25: 0.8} },
        12.5: { 0: {6.25: 10, 12.5: 10, 25: 10}, 6.25: {6.25: 6, 12.5: 7.2, 25: 8.7}, 12.5: {6.25: 0.6, 12.5: 3, 25: 6}, 18.75: {6.25: 0.2, 12.5: 0.2, 25: 1.2}, 25: {6.25: 0, 12.5: 0.1, 25: 0.4} },
        25.0: { 0: {6.25: 10, 12.5: 10, 25: 10}, 6.25: {6.25: 8.7, 12.5: 8.7, 25: 9}, 12.5: {6.25: 3.2, 12.5: 6, 25: 6.5}, 18.75: {6.25: 0.8, 12.5: 1.2, 25: 1.7}, 25: {6.25: 0, 12.5: 0.4, 25: 0.4} }
    },
    # 1.4 WAN Simplex
    "WAN_SIMPLEX": {
        6.25: { 0: {6.25: 140, 12.5: 140, 25: 140}, 6.25: {6.25: 90, 12.5: 123, 25: 136}, 12.5: {6.25: 33, 12.5: 51, 25: 106}, 18.75: {6.25: 33, 12.5: 25, 25: 64}, 25: {6.25: 26, 12.5: 20, 25: 21} },
        12.5: { 0: {6.25: 140, 12.5: 140, 25: 140}, 6.25: {6.25: 130, 12.5: 130, 25: 135}, 12.5: {6.25: 33, 12.5: 35, 25: 100}, 18.75: {6.25: 30, 12.5: 22, 25: 76}, 25: {6.25: 23, 12.5: 5, 25: 8} },
        25.0: { 0: {6.25: 140, 12.5: 140, 25: 140}, 6.25: {6.25: 136, 12.5: 135, 25: 135}, 12.5: {6.25: 106, 12.5: 100, 25: 118}, 18.75: {6.25: 64, 12.5: 76, 25: 82}, 25: {6.25: 21, 12.5: 8, 25: 56} }[...]
    },
    # 1.5 WAN Duplex
    "WAN_DUPLEX": {
        6.25: { 0: {6.25: 100, 12.5: 100, 25: 100}, 6.25: {6.25: 52, 12.5: 86, 25: 94}, 12.5: {6.25: 0, 12.5: 0, 25: 63} },
        12.5: { 0: {6.25: 100, 12.5: 140, 25: 140}, 6.25: {6.25: 94, 12.5: 87, 25: 94}, 12.5: {6.25: 0, 12.5: 76, 25: 100}, 18.75: {6.25: 0, 12.5: 22, 25: 47}, 25: {6.25: 0, 12.5: 5, 25: 8} },
        25.0: { 0: {6.25: 100, 12.5: 140, 25: 140}, 6.25: {6.25: 94, 12.5: 94, 25: 94}, 12.5: {6.25: 63, 12.5: 100, 25: 74}, 18.75: {6.25: 0, 12.5: 47, 25: 49}, 25: {6.25: 0, 12.5: 8, 25: 43} }
    }
}

# 2. DẢI TẦN UHF
MATRIX_UHF = {
    # 2.1 LAN UHF - Cao > 15m
    "LAN_BIG_CITY_HIGH": {
        6.25: { 0: {6.25: 10, 12.5: 10, 25: 10}, 6.25: {6.25: 2.1, 12.5: 6, 25: 8.5}, 12.5: {6.25: 0.2, 12.5: 0.6, 25: 3.2}, 18.75: {6.25: 0.1, 12.5: 0.3, 25: 0.7} },
    # ... rest unchanged ...
